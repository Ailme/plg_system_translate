google.load("language","1");
var translate={enableGoogle:0,fromLang:"ru",toLang:"en",tmp:"",trim:function(a){a=a.toLowerCase();a=a.replace(/[^a-z\u0430-\u044f0-9\-]/g,"-");return a=a.replace(/(\-|\s)+/g,"-")},transliterate:function(a){if(a.length==0)return"";ru="\u0430\u0431\u0432\u0433\u0434\u0435\u0451\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e\u044f";en=["a","b","v","g","d","e","e","zh","z","i","y","k","l","m","n","o",
"p","r","s","t","u","f","h","ts","ch","sh","sch","","y","","e","yu","ya"];for(var b=[],e=0,c=a.length;e<c;e++){var h=a.charAt(e),g=ru.indexOf(h);b[b.length]=g>=0?en[g]:h}return b.join("")},gTransliterate:function(a,b){var e=this;google.language.translate(a,e.fromLang,e.toLang,function(c){if(c.translation){c=c.translation;c=e.trim(c)}else c=e.transliterate(a);b&&b(c)})}};
function getLang(a){if(a.search("russian")>=0)return"ru";if(a.search("french")>=0)return"fr";if(a.search("english")>=0)return"en"}
(function(a,b){a(function(){var e=a("input[name=alias]").eq(0),c=a("input[name=title], input[name=name], input[name=caption]").eq(0);e.length==1&&c.length==1&&c.bind("blur",function(){var d=a(this).val();if(b.enableGoogle)b.gTransliterate(d,function(f){e.val(f)});else{d=b.trim(d);d=b.transliterate(d);e.val(d)}});var h=a("input[name=refField_alias]").eq(0),g=a("input[name=refField_name], input[name=refField_title]").eq(0);c=a("#language_id").eq(0);var i=a(".modtranslate img").eq(0);if(g.length==1&&
c.length==1&&i.length==1){var l=a(":selected",c).text().toLowerCase();i=i.attr("title").toLowerCase();var j=a("#original_value_name, #original_value_title").eq(0).text();b.fromLang=getLang(i);b.toLang=getLang(l);var k=function(d){b.gTransliterate(d,function(f){g.val(f);f=b.trim(f);f=b.transliterate(f);h.val(f)})};g.val().length==0&&k(j);c.bind("change",function(){var d=a(":selected",this).text().toLowerCase();b.toLang=getLang(d);k(j)});g.bind("blur",function(){var d=a(this).val();d=b.trim(d);d=b.transliterate(d);
h.val(d)})}})})(jQuery,translate);